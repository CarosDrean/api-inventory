{"version":3,"sources":["../../src/resolvers/movement.js"],"names":["Query","movement","_","_id","user","role","permission","isAuthenticated","Movement","findById","exec","movements","args","find","sort","movementsInventory","inventory","Mutation","createMovement","input","isUser","save","deleteMovement","findByIdAndDelete","updateMovement","findByIdAndUpdate","product","Product","User","Inventory"],"mappings":"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","sourcesContent":["import Movement from '../models/movement'\r\nimport Product from '../models/product'\r\nimport User from '../models/user'\r\nimport Inventory from '../models/inventory'\r\nimport permission from '../middlewares/permissions';\r\n\r\nexport default {\r\n    Query: {\r\n        movement: async(_, { _id }, { user, role }) => {\r\n            permission.isAuthenticated(user)\r\n            return await Movement.findById(_id).exec()\r\n        },\r\n        movements: async(_, args, { user, role }) => {\r\n            permission.isAuthenticated(user)\r\n            return await Movement.find().sort({_id: -1})\r\n        },\r\n        movementsInventory: async(_, { inventory }, { user, role }) => {\r\n            permission.isAuthenticated(user)\r\n            return await Movement.find({inventory}).sort({_id: -1})\r\n        }\r\n    },\r\n    Mutation: {\r\n        createMovement: async(_, { input }, { user, role }) => {\r\n            permission.isUser(user, role)\r\n            const movement = new Movement(input)\r\n            return await movement.save()\r\n        },\r\n        deleteMovement: async(_, { _id }, { user, role }) => {\r\n            permission.isUser(user, role)\r\n            return await Movement.findByIdAndDelete(_id)\r\n        },\r\n        updateMovement: async(_, { _id, input }, { user, role }) => {\r\n            permission.isUser(user, role)\r\n            return await Movement.findByIdAndUpdate(_id, input, { new: true })\r\n        }\r\n    },\r\n    Movement: {\r\n        product: async({ product }) => {\r\n            return await Product.findById({ _id: product })\r\n        },\r\n        user: async({ user }) => {\r\n            return await User.findById({ _id: user })\r\n        },\r\n        inventory: async({ inventory }) => {\r\n            return await Inventory.findById({ _id: inventory })\r\n        }\r\n    }\r\n}"],"file":"movement.js"}